(this["webpackJsonpsensors-web-app"]=this["webpackJsonpsensors-web-app"]||[]).push([[0],{225:function(e,t,n){},308:function(e,t){},370:function(e,t,n){},372:function(e,t,n){},373:function(e,t,n){},374:function(e,t,n){},375:function(e,t,n){},376:function(e,t,n){},394:function(e,t,n){},491:function(e,t,n){},492:function(e,t,n){},493:function(e,t,n){},494:function(e,t,n){},495:function(e,t,n){},496:function(e,t,n){},497:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),i=n(29),r=n.n(i),c=n(41),o=(n(225),n(5)),d=n.n(o),l=n(11),u=n(4),j="https://vhsair.com",b=n(10),m=n(6),p=n.n(m),v=n(88),h=(n(300),n(350),n(31)),O=n.n(h),f=n(49),x=n.n(f),_=n.p+"static/media/logo.0240e364.png",g=n(1),w=function(){return Object(g.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(g.jsx)("path",{d:"M7.24485 14.7815L10.238 10.8913L13.6522 13.5732L16.5812 9.79291",stroke:"#1B1D21",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),Object(g.jsx)("circle",{cx:"19.9954",cy:"4.20023",r:"1.9222",stroke:"#1B1D21",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),Object(g.jsx)("path",{d:"M14.9245 3.12013H7.65675C4.64531 3.12013 2.77803 5.25286 2.77803 8.2643V16.3467C2.77803 19.3581 4.60869 21.4817 7.65675 21.4817H16.2609C19.2723 21.4817 21.1396 19.3581 21.1396 16.3467V9.30778",stroke:"#1B1D21",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})},N=function(){return Object(g.jsxs)("svg",{width:"20",height:"22",viewBox:"0 0 20 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(g.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.8067 6.62357L18.1842 5.54348C17.6577 4.62956 16.4907 4.31427 15.5755 4.83867V4.83867C15.1399 5.0953 14.6201 5.16811 14.1307 5.04104C13.6413 4.91398 13.2226 4.59747 12.9668 4.16133C12.8023 3.8841 12.7139 3.56835 12.7105 3.24599V3.24599C12.7254 2.72918 12.5304 2.22836 12.17 1.85762C11.8096 1.48689 11.3145 1.27782 10.7975 1.27803H9.5435C9.03697 1.27802 8.55131 1.47987 8.194 1.8389C7.83669 2.19793 7.63717 2.68455 7.63961 3.19107V3.19107C7.6246 4.23688 6.77248 5.07677 5.72657 5.07666C5.40421 5.07331 5.08846 4.9849 4.81123 4.82036V4.82036C3.89606 4.29597 2.72911 4.61125 2.20254 5.52517L1.53435 6.62357C1.00841 7.53635 1.3194 8.70256 2.23 9.23226V9.23226C2.8219 9.57399 3.18653 10.2055 3.18653 10.889C3.18653 11.5725 2.8219 12.204 2.23 12.5458V12.5458C1.32056 13.0719 1.00923 14.2353 1.53435 15.1453V15.1453L2.16593 16.2346C2.41265 16.6797 2.8266 17.0082 3.31619 17.1474C3.80578 17.2865 4.33064 17.2249 4.77462 16.976V16.976C5.21108 16.7213 5.73119 16.6515 6.21934 16.7822C6.70749 16.9128 7.12324 17.233 7.37416 17.6716C7.5387 17.9488 7.62711 18.2646 7.63046 18.587V18.587C7.63046 19.6435 8.48696 20.5 9.5435 20.5H10.7975C11.8505 20.5 12.7055 19.6491 12.7105 18.5961V18.5961C12.7081 18.088 12.9089 17.6 13.2682 17.2407C13.6275 16.8814 14.1155 16.6806 14.6236 16.6831C14.9452 16.6917 15.2596 16.7797 15.5389 16.9394V16.9394C16.4517 17.4653 17.6179 17.1543 18.1476 16.2437V16.2437L18.8067 15.1453C19.0618 14.7075 19.1318 14.186 19.0012 13.6963C18.8706 13.2067 18.5502 12.7893 18.111 12.5366V12.5366C17.6718 12.2839 17.3514 11.8665 17.2208 11.3769C17.0902 10.8873 17.1603 10.3658 17.4154 9.92792C17.5812 9.63829 17.8214 9.39815 18.111 9.23226V9.23226C19.0161 8.70285 19.3264 7.54345 18.8067 6.63272V6.63272V6.62357Z",stroke:"#1B1D21",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),Object(g.jsx)("circle",{cx:"10.1751",cy:"10.889",r:"2.63616",stroke:"#1B1D21",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})},C=function(e,t,n){var s=function(a){(a.path||a.composedPath&&a.composedPath()).includes(e.current)||t(n)};Object(a.useEffect)((function(){return document.body.addEventListener("click",s),function(){return document.body.removeEventListener("click",s)}}),[])},k=(n(370),function(e){var t=e.profileInfo,n=(e.isOpen,e.setIsOpen),s=e.isLoading,i=Object(a.useRef)();return C(i,(function(){return n(!1)})),Object(g.jsxs)("div",{className:"asideMenu",children:[Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"asideMenu__logo",children:Object(g.jsx)("img",{src:_,alt:"logo"})}),Object(g.jsxs)("div",{className:"asideMenu__buttons",children:[Object(g.jsx)("div",{className:"text",children:"Admin tools"}),Object(g.jsxs)("ul",{children:[Object(g.jsx)("li",{className:"btn",children:Object(g.jsx)(c.b,{to:"/dashboard",children:Object(g.jsxs)("div",{className:"btn__content",children:[Object(g.jsx)("div",{className:"icon",children:Object(g.jsx)(w,{})}),Object(g.jsx)("div",{className:"btnText",children:"Data"})]})})}),(null===t||void 0===t?void 0:t.ruleAdmin)&&Object(g.jsx)("li",{className:"btn",children:Object(g.jsx)(c.b,{to:"/settings",children:Object(g.jsxs)("div",{className:"btn__content",children:[Object(g.jsx)("div",{className:"icon",children:Object(g.jsx)(N,{})}),Object(g.jsx)("div",{className:"btnText",children:"Admins"})]})})})]})]})]}),Object(g.jsxs)("div",{className:"asideMenu__info",children:[s?Object(g.jsx)(x.a,{type:"ThreeDots",color:"#4f7a9f",height:30,width:30}):Object(g.jsx)("div",{className:"emailText",children:t&&(null===t||void 0===t?void 0:t.login)}),Object(g.jsx)("div",{className:"text",children:(null===t||void 0===t?void 0:t.ruleAdmin)?"Super Admin":"Admin"}),Object(g.jsx)("div",{className:"logOut__btn",ref:i,onClick:function(){return n((function(e){return!e}))},children:"Log Out"})]})]})}),S=(n(372),function(e){var t=e.profileInfo,n=e.title,a=e.isLoading;return Object(g.jsxs)("div",{className:"greetingBlock",children:[a?Object(g.jsx)(x.a,{type:"ThreeDots",color:"#4f7a9f",height:40,width:40}):Object(g.jsxs)("div",{className:"greetingBlock__subtitle",children:["Hi, ",t&&(null===t||void 0===t?void 0:t.login)]}),Object(g.jsx)("div",{className:"greetingBlock__title",children:n})]})}),y=(n(373),function(e){var t=e.isOpen,n=e.toggleModal,a=e.action,s=e.actionBtnFirstTitle,i=e.actionBtnSecondTitle,r=e.title;return Object(g.jsx)("div",{className:O()("modal",{active:t}),onClick:function(e){return e.stopPropagation()},children:Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"modal__text",children:r}),Object(g.jsxs)("div",{className:"modal__btnWrapper",children:[Object(g.jsx)("div",{className:"modal__cancel",onClick:n,children:s}),Object(g.jsx)("div",{className:"modal__confirm",onClick:a,children:i})]})]})})}),A=s.a.createContext({}),D=(n(374),function(e){var t,n=e.dataEdit,s=e.setDataEdit,i=e.item,r=e.dataWasChanged,c=Object(a.useContext)(A),o=c.sendChangeData,d=c.am7,l=c.am11,j=c.pm3,b=c.pm7,m=Object(a.useState)(!1),p=Object(u.a)(m,2),v=p[0],h=p[1],f=function(){return h((function(e){return!e}))};return Object(g.jsx)("button",{className:"editDataButton",onClick:function(){n?f():s((function(e){return!e}))},disabled:null===i||void 0===i||null===(t=i.data)||void 0===t?void 0:t.every((function(e){if(!e.canEdit&&!e.edited)return!0})),children:n?Object(g.jsxs)("div",{children:["Save",Object(g.jsx)("div",{className:O()("editDataButton__confirmModal",{active:v}),onClick:function(e){return e.stopPropagation()},children:Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"editDataButton__confirmModal__text",children:"Are you really want to save changes?"}),Object(g.jsxs)("div",{className:"editDataButton__confirmModal__btnWrapper",children:[Object(g.jsx)("div",{className:"editDataButton__confirmModal__cancel",onClick:function(){s(!n),f()},children:"CANCEL"}),Object(g.jsx)("div",{className:"editDataButton__confirmModal__confirm",onClick:function(){r("Data was changed"),o(d,l,j,b),s(!n),f()},children:"CONFIRM"})]})]})})]}):Object(g.jsx)("div",{children:"Edit"})})}),T=n.p+"static/media/calendar.1bbc450e.svg",E=n.p+"static/media/download.187b9795.svg",I=n.p+"static/media/arrow.506adcd3.svg",L=(n(375),function(e){var t=e.item,n=e.sensorId,s=e.element,i=e.index,r=e.date,c=e.cardIsOpen,o=e.setCardIsOpen,d=e.dataEdit,l=e.setDataEdit,j=e.dataWasChanged,b=Object(a.useContext)(A),m=b.setSensorTimeslots,p=b.setAm7,v=b.setAm11,h=b.setPm3,O=b.setPm7,f=Object(a.useState)(),x=Object(u.a)(f,2),_=x[0],w=x[1],N=Object(a.useState)(),C=Object(u.a)(N,2),k=C[0],S=C[1],y=Object(a.useState)(),T=Object(u.a)(y,2),E=T[0],L=T[1],P=new Date(s.date),B={idData:s._id,idSensor:n,aqi:+_,humidity:+k,temperature:+E};Object(a.useEffect)((function(){if(_&&k&&E)switch(P.getHours()){case 3:p(B);break;case 7:v(B);break;case 12:h(B);break;case 17:O(B)}}),[_,k,E]);var M=new Date(r),F=function(e){var t=e.split(" ");return t[1].split(":",1)+" "+t[2]}(s.date);return Object(g.jsx)("tbody",{className:0===i?"tableRow__thead":"tableRow__tbody",children:Object(g.jsxs)("tr",{className:"tableRow__wrapper",children:[Object(g.jsxs)("th",{className:"tableRow__column",children:[0===i&&Object(g.jsx)("div",{className:"tableRow__text",children:M.toDateString().slice(3)}),1===i&&Object(g.jsx)(D,{dataEdit:d,setDataEdit:l,item:t,dataWasChanged:j})]}),Object(g.jsx)("th",{className:"tableRow__column tableRow__text",children:F}),Object(g.jsx)("th",{className:"tableRow__column",children:Object(g.jsx)("input",{className:"tableRow__input",maxLength:"4",placeholder:"Data didn't come"!==s.description?Math.round(s.aqi):"-",name:"aqi",value:_,onChange:function(e){e.target.value>=0&&e.target.value<=1e3&&e.target.value.length<=4&&w(e.target.value)},type:"number",disabled:!s.canEdit&&!s.edited||!d})}),Object(g.jsx)("th",{className:"tableRow__column",children:Object(g.jsx)("input",{className:"tableRow__input",placeholder:"Data didn't come"!==s.description?Math.round(s.humidity):"-",name:"humidity",value:k,onChange:function(e){e.target.value>=-126&&e.target.value<=136&&S(e.target.value)},type:"number",disabled:!s.canEdit&&!s.edited||!d})}),0===i?Object(g.jsxs)("th",{className:"tableRow__column arrowJustify",children:[Object(g.jsx)("input",{className:"tableRow__input",placeholder:"Data didn't come"!==s.description?Math.round(s.temperature):"-",name:"temperature",value:E,onChange:function(e){e.target.value>=0&&e.target.value<=100&&e.target.value.length<=3&&L(e.target.value)},type:"number",disabled:!s.canEdit&&"Data didn't come"!==s.description&&!s.edited||!d}),Object(g.jsx)("img",{src:I,alt:"arrow",className:"arrowIcon ".concat(c&&"arrowIcon__open"),onClick:function(){o((function(e){return!e})),m(null===t||void 0===t?void 0:t.data)}})]}):Object(g.jsx)("input",{className:"tableRow__input",placeholder:"Data didn't come"!==s.description?Math.round(s.temperature):"-",name:"temperature",value:E,onChange:function(e){e.target.value>=0&&e.target.value<=100&&e.target.value.length<=3&&L(e.target.value)},type:"number",disabled:!s.canEdit&&!s.edited||!d})]})})}),P=(n(376),function(e){var t,n=e.item,s=e.sensor,i=e.dataWasChanged,r=Object(a.useState)(null),c=Object(u.a)(r,2),o=c[0],d=c[1],l=Object(a.useState)(!1),j=Object(u.a)(l,2),b=j[0],m=j[1];return Object(g.jsx)("table",{className:O()("tablecard",{active:o}),children:null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.map((function(e,t){return Object(g.jsx)(L,{element:e,index:t,date:null===n||void 0===n?void 0:n.DATE,item:n,cardIsOpen:o,setCardIsOpen:d,dataEdit:b,setDataEdit:m,sensorId:null===s||void 0===s?void 0:s.id,dataWasChanged:i},t)}))})}),B={dashboardGreeting:"Welcome back\ud83d\udc4b",adminGreeting:"Admins settings",justGreeting:"Hi Manoj,"},M=["Date","Time Slot","AQI","Humidity","Temperature"],F=["Create Admin","Admins"],R=function(){return JSON.parse(localStorage.getItem("token"))},W=function(e){localStorage.setItem("token",JSON.stringify(e))},V=function(){localStorage.removeItem("token")},G=n(50),H=n.n(G),z=H.a.create({baseURL:j});z.interceptors.response.use((function(e){return e}),function(){var e=Object(l.a)(d.a.mark((function e(t){var n,a,s,i,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.config,401!==t.response.status||!n||n._isRetry){e.next=17;break}return n._isRetry=!0,e.prev=3,e.next=6,H.a.post("".concat(j,"/admin/refreshToken"));case 6:if(!(s=e.sent)||200!==(null===s||void 0===s?void 0:s.status)||!(null===s||void 0===s||null===(a=s.data)||void 0===a?void 0:a.accessToken)){e.next=11;break}return W(null===s||void 0===s||null===(i=s.data)||void 0===i?void 0:i.accessToken),n.headers.Authorization="Bearer ".concat(null===s||void 0===s||null===(r=s.data)||void 0===r?void 0:r.accessToken),e.abrupt("return",z.request(n));case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),401===(null===e.t0||void 0===e.t0||null===(c=e.t0.response)||void 0===c?void 0:c.status)&&(V(),window.location.pathname="/singIn"),console.log("User unauthorized",e.t0.response);case 17:throw t;case 18:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}());var q=z,U=function(){var e=Object(l.a)(d.a.mark((function e(t,n,a){var s,i,r,c,o,l=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>3&&void 0!==l[3]?l[3]:null,i=l.length>4&&void 0!==l[4]&&l[4],e.prev=2,r=null!==s&&void 0!==s?s:R(),c={"Content-Type":"application/json",Accept:"application/json"},r&&(c.Authorization="Bearer ".concat(r)),e.next=9,q({method:a,headers:c,url:t,data:n,responseType:i?"blob":""});case 9:return o=e.sent,e.abrupt("return",null===o||void 0===o?void 0:o.data);case 13:if(e.prev=13,e.t0=e.catch(2),!e.t0.response){e.next=25;break}if(400!==e.t0.response.status){e.next=20;break}return e.abrupt("return",e.t0.response.data);case 20:if(403!==e.t0.response.status){e.next=24;break}return e.abrupt("return",!1);case 24:500===e.t0.response.status&&alert("Sorry the server is not available right now please try later");case 25:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t,n,a){return e.apply(this,arguments)}}(),J=n(35),Q=(n(109),n(394),function(){var e=Object(a.useContext)(A),t=e.profileInfo,n=e.token,s=Object(a.useState)(!0),i=Object(u.a)(s,2),r=i[0],c=i[1],o=Object(a.useState)(!1),j=Object(u.a)(o,2),b=j[0],m=j[1],h=Object(a.useState)(),f=Object(u.a)(h,2),_=f[0],w=f[1],N=Object(a.useState)(),C=Object(u.a)(N,2),D=C[0],I=C[1],L=Object(a.useState)(),F=Object(u.a)(L,2),R=F[0],W=F[1],G=Object(a.useState)(!1),H=Object(u.a)(G,2),z=H[0],q=H[1],Q=function(e){return Object(J.b)(e)},Z=Object(a.useState)([]),K=Object(u.a)(Z,2),X=K[0],Y=K[1],$=Object(a.useState)(1),ee=Object(u.a)($,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(),se=Object(u.a)(ae,2),ie=se[0],re=se[1],ce=Object(a.useState)(),oe=Object(u.a)(ce,2),de=oe[0],le=oe[1],ue=function(e){var t=URL.createObjectURL(new Blob([e])),n=document.createElement("a");n.href=t,n.download=t.split("/").pop()+".xlsx",document.body.appendChild(n),n.click(),document.body.removeChild(n)},je=function(){var e=Object(l.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U("admin/getSensors?page=".concat(t,"&size=5"),{from:null,to:null},"POST");case 2:(n=e.sent)&&(null===n||void 0===n?void 0:n.successGet)&&(Y(null===n||void 0===n?void 0:n.sensors),c((function(e){return!e})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=Object(l.a)(d.a.mark((function e(t,n){var a,s,i,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new Date(null===t||void 0===t||null===(a=t._d)||void 0===a?void 0:a.setHours(0,0,0,0)),r=new Date(null===n||void 0===n||null===(s=n._d)||void 0===s?void 0:s.setHours(23,59,59,0)),e.next=4,U("admin/getSensors?page=1&size=50",{from:i,to:r},"POST");case 4:(c=e.sent)&&(null===c||void 0===c?void 0:c.successGet)&&Y(null===c||void 0===c?void 0:c.sensors);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),me=function(){var e=Object(l.a)(d.a.mark((function e(){var t,n,a,s,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=new Date(null===_||void 0===_||null===(t=_._d)||void 0===t?void 0:t.setHours(0,0,0,0)),s=new Date(null===D||void 0===D||null===(n=D._d)||void 0===n?void 0:n.setHours(23,59,59,0)),!_||!D){e.next=7;break}return e.next=5,U("admin/report",{from:a,to:s},"POST",null,!0);case 5:(i=e.sent)&&ue(i);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){_&&D&&be(_,D)}),[_,D]),Object(a.useEffect)((function(){je(te)}),[n]),Object(a.useEffect)((function(){re(X&&X[0])}),[X]),Object(a.useEffect)((function(){le(null===ie||void 0===ie?void 0:ie.dataSensor)}),[ie]);var pe=function(){var e=Object(l.a)(d.a.mark((function e(){var t,n,a,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U("admin/getSensors?page=".concat(te+1,"&size=5"),{from:null,to:null},"POST");case 2:if((t=e.sent)&&(null===t||void 0===t?void 0:t.successGet))for(ne(+(null===t||void 0===t?void 0:t.page)),n=0;n<(null===t||void 0===t||null===(a=t.sensors)||void 0===a?void 0:a.length);n++)(null===t||void 0===t||null===(s=t.sensors[n])||void 0===s?void 0:s.name)===(null===ie||void 0===ie?void 0:ie.name)&&le(de.concat(t.sensors[n].dataSensor));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(g.jsxs)("div",{className:"dashboard",children:[Object(g.jsx)(J.a,{}),Object(g.jsx)("div",{className:"dashboard__asideMenu",children:Object(g.jsx)(k,{profileInfo:t,isOpen:z,setIsOpen:q,isLoading:r})}),Object(g.jsx)(y,{isOpen:z,toggleModal:function(){return q((function(e){return!e}))},action:function(){V(),window.location.pathname="/singIn"},actionBtnFirstTitle:"Cancel",actionBtnSecondTitle:"Log Out",title:"Are you really want log out?"}),Object(g.jsxs)("div",{className:"dashboard__content",children:[Object(g.jsxs)("div",{className:"dashboard__header",children:[Object(g.jsx)(S,{profileInfo:t,title:null===B||void 0===B?void 0:B.dashboardGreeting,isLoading:r}),Object(g.jsx)("div",{className:b?"calendar__visible":"calendar__hidden",children:Object(g.jsx)(v.DateRangePicker,{startDate:_,startDateId:"start-date",endDate:D,endDateId:"end-date",onDatesChange:function(e){var t=e.startDate,n=e.endDate;w(t),I(n)},focusedInput:R,onFocusChange:function(e){return W(e)},isOutsideRange:function(e){return!Object(v.isInclusivelyBeforeDay)(e,p()())}})})]}),Object(g.jsxs)("div",{className:"dashboard__submenu",children:[r?Object(g.jsx)("div",{className:"dashboardTable__spinerLocation",children:Object(g.jsx)(x.a,{type:"ThreeDots",color:"#4f7a9f",height:50,width:50})}):Object(g.jsx)("div",{className:"location__buttons",children:null===X||void 0===X?void 0:X.map((function(e,t){return Object(g.jsx)("div",{className:O()("location__button",{active:(null===ie||void 0===ie?void 0:ie.name)===(null===e||void 0===e?void 0:e.name)}),onClick:function(){re(e),ne(1)},children:e.name},t)}))}),Object(g.jsxs)("div",{className:"support__buttons",children:[Object(g.jsx)("div",{className:"support__buttons__calendar",onClick:function(){m(!b)},children:Object(g.jsx)("img",{src:T,alt:"calendar"})}),Object(g.jsx)("div",{className:"support__buttons__download",onClick:me,children:Object(g.jsx)("img",{src:E,alt:"download"})})]})]}),Object(g.jsxs)("div",{className:"dashboardTable",children:[Object(g.jsx)("div",{className:"dashboardTable__titles",children:null===M||void 0===M?void 0:M.map((function(e,t){return Object(g.jsx)("div",{className:"dashboardTable__title",children:e},t)}))}),r?Object(g.jsx)("div",{className:"dashboardTable__spiner",children:Object(g.jsx)(x.a,{type:"ThreeDots",color:"#4f7a9f",height:100,width:100})}):null===de||void 0===de?void 0:de.map((function(e,t){return Object(g.jsx)(P,{item:e,sensor:ie,dataWasChanged:Q},t)})),Object(g.jsx)("div",{className:"dashboardTable__buttonWrapper",children:Object(g.jsx)("div",{className:"dashboardTable__button",onClick:pe,children:"Load More"})})]})]})]})}),Z=n(92),K=n(36),X=(n(491),K.a().shape({login:K.b().min(6).required(),password:K.b().min(6).required(),confirmPassword:K.b().min(6).required()})),Y=function(e){var t=e.setAdmins,n=e.admitWasAddedMessage,a=Object(Z.a)({initialValues:{login:"",password:"",confirmPassword:""},validationSchema:X,onSubmit:function(){var e=Object(l.a)(d.a.mark((function e(s){var i,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.password!==s.confirmPassword){e.next=13;break}return e.next=3,U("admin/createUser",{login:s.login,password:s.password},"POST");case 3:if(i=e.sent,n(i.message),!i||!i.created){e.next=11;break}return e.next=8,U("admin/users?page=1&size=3",null,"GET");case 8:r=e.sent,t(r.users),a.resetForm();case 11:e.next=14;break;case 13:n("Password don`t same");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});return Object(g.jsxs)("form",{onSubmit:a.handleSubmit,className:"addAdminForm",children:[Object(g.jsxs)("div",{className:"addAdminForm__input__wrapper",children:[Object(g.jsx)("label",{htmlFor:"login",className:"addAdminForm__label",children:"Login"}),Object(g.jsx)("input",{id:"login",name:"login",type:"login",placeholder:"Enter login",onChange:a.handleChange,value:a.values.login,className:"addAdminForm__input"}),Object(g.jsx)("div",{className:"addAdminForm__error",children:a.errors.login})]}),Object(g.jsxs)("div",{className:"addAdminForm__input__wrapper",children:[Object(g.jsx)("label",{htmlFor:"password",className:"addAdminForm__label",children:"Password"}),Object(g.jsx)("input",{id:"password",name:"password",type:"password",placeholder:"Enter password",onChange:a.handleChange,value:a.values.password,className:"addAdminForm__input"}),Object(g.jsx)("div",{className:"addAdminForm__error",children:a.errors.password})]}),Object(g.jsxs)("div",{className:"addAdminForm__input__wrapper",children:[Object(g.jsx)("label",{htmlFor:"password",className:"addAdminForm__label",children:"Confirm password"}),Object(g.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:"password",placeholder:"Confirm password",onChange:a.handleChange,value:a.values.confirmPassword,className:"addAdminForm__input"}),Object(g.jsx)("div",{className:"addAdminForm__error",children:a.errors.confirmPassword})]}),Object(g.jsx)("div",{children:Object(g.jsx)("input",{type:"submit",value:"Create Profile",className:"addAdminForm__button",disabled:!a.dirty})})]})},$=(n(492),function(e){var t=e.admin,n=e.setAdmins,s=e.admitWasAddedMessage,i=Object(a.useContext)(A).token,r=Object(a.useState)(!1),c=Object(u.a)(r,2),o=c[0],b=c[1],m=function(){return b((function(e){return!e}))},p=Object(a.useRef)();C(p,(function(){return b(!1)}));var v=function(){var e=Object(l.a)(d.a.mark((function e(){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H()({method:"DELETE",url:"".concat(j,"/admin/removeUser/").concat(null===t||void 0===t?void 0:t._id),headers:{Authorization:"Bearer ".concat(i),"Content-Type":"application/json"}});case 2:if(!e.sent){e.next=9;break}return s("Admin deleted"),e.next=7,U("admin/users?page=1&size=3",null,"GET");case 7:a=e.sent,n(a.users);case 9:m();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(g.jsxs)("div",{className:"adminCard",children:[Object(g.jsx)("div",{className:"adminCard__email",children:t.login}),Object(g.jsx)("div",{className:"adminCard__button",ref:p,onClick:m,children:"Delete"}),Object(g.jsx)(y,{isOpen:o,toggleModal:m,action:v,actionBtnFirstTitle:"Cancel",actionBtnSecondTitle:"Delete",title:"Are you sure want to delete admin?"})]})}),ee=(n(493),function(e){var t=e.admins,n=e.setAdmins,a=e.page,s=e.setPage,i=e.admitWasAddedMessage;return Object(g.jsxs)("div",{className:"admins",children:[Object(g.jsx)("div",{className:"admins__title",children:"Login"}),t&&(null===t||void 0===t?void 0:t.map((function(e,t){return Object(g.jsx)($,{admin:e,setAdmins:n,admitWasAddedMessage:i},t)}))),Object(g.jsxs)("div",{className:"admins__paginationWrapper",children:[Object(g.jsx)("div",{className:"admins__paginationWrapper__btn",onClick:function(){a>1&&s(a&&a-1)},children:"Back"}),Object(g.jsx)("div",{className:"admins__paginationWrapper__btn",onClick:function(){t&&(null===t||void 0===t?void 0:t.length)<3?s(a&&a):s(a&&a+1)},children:"Next"})]})]})}),te=function(){var e=Object(l.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U("admin/profile",null,"GET");case 2:(n=e.sent)&&(null===n||void 0===n?void 0:n.profileGet)&&t(null===n||void 0===n?void 0:n.profile);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(l.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U("admin/users?page=".concat(n,"&size=",3),null,"GET");case 2:(a=e.sent)&&(null===a||void 0===a?void 0:a.success)&&t(null===a||void 0===a?void 0:a.users);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ae=(n(494),function(){var e=Object(a.useContext)(A).profileInfo,t=Object(a.useState)([]),n=Object(u.a)(t,2),s=n[0],i=n[1],r=Object(a.useState)(1),c=Object(u.a)(r,2),o=c[0],d=c[1],l=Object(a.useState)("Create Admin"),j=Object(u.a)(l,2),b=j[0],m=j[1],p=Object(a.useState)(!1),v=Object(u.a)(p,2),h=v[0],f=v[1],x=function(e){return Object(J.b)("".concat(e))};return Object(a.useEffect)((function(){ne(i,o)}),[o]),Object(g.jsxs)("div",{className:"settings",children:[Object(g.jsx)(J.a,{}),Object(g.jsx)("div",{className:"settings__asideMenu",children:Object(g.jsx)(k,{profileInfo:e,isOpen:h,setIsOpen:f})}),Object(g.jsx)(y,{isOpen:h,toggleModal:function(){return f((function(e){return!e}))},action:function(){V(),window.location.pathname="/singIn"},actionBtnFirstTitle:"Cancel",actionBtnSecondTitle:"Log Out",title:"Are you really want log out?"}),Object(g.jsxs)("div",{className:"settings__content",children:[Object(g.jsx)("div",{children:Object(g.jsx)(S,{profileInfo:e,title:B.adminGreeting})}),Object(g.jsxs)("div",{className:"settings__table",children:[Object(g.jsx)("div",{className:"settings__table__menu",children:F.map((function(e,t){return Object(g.jsx)("div",{className:O()("settings__table__button",{active:b===e}),onClick:function(){m(e)},children:e},t)}))}),Object(g.jsx)("div",{children:"Create Admin"===b?Object(g.jsx)(Y,{setAdmins:i,admitWasAddedMessage:x}):Object(g.jsx)(ee,{admins:s,setAdmins:i,setPage:d,page:o,admitWasAddedMessage:x})})]})]})]})}),se=(n(495),K.a().shape({login:K.b().required().min(6,"Login should be bigger then 6 chars"),password:K.b().required().min(6,"Password should be bigger then 6 chars")})),ie=function(e){var t=e.wrongPassword,n=Object(Z.a)({initialValues:{login:"",password:""},validationSchema:se,onSubmit:function(){var e=Object(l.a)(d.a.mark((function e(a){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U("admin/weblogin",{login:a.login,password:a.password},"POST");case 2:(null===(s=e.sent)||void 0===s?void 0:s.loginOwnSuccess)&&(W(s.accessToken),window.location.pathname="/dashboard"),s.error&&(t(s.message),n.resetForm());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});return Object(g.jsxs)("form",{onSubmit:n.handleSubmit,className:"form",children:[Object(g.jsxs)("div",{className:"input__wrapper",children:[Object(g.jsx)("label",{htmlFor:"login",className:"form__label",children:"Login"}),Object(g.jsx)("input",{id:"login",name:"login",type:"login",placeholder:"Enter login",onChange:n.handleChange,value:n.values.login,className:"form__input"}),Object(g.jsx)("div",{className:"form__error",children:n.errors.login})]}),Object(g.jsxs)("div",{className:"input__wrapper",children:[Object(g.jsx)("label",{htmlFor:"password",className:"form__label",children:"Password"}),Object(g.jsx)("input",{id:"password",name:"password",type:"password",placeholder:"Enter password",onChange:n.handleChange,value:n.values.password,className:"form__input"}),Object(g.jsx)("div",{className:"form__error",children:n.errors.password})]}),Object(g.jsx)("div",{children:Object(g.jsx)("input",{type:"submit",value:"LOGIN",className:"form__button",disabled:!n.dirty})})]})},re=(n(496),[{path:"/signIn",exact:!0,component:function(){return Object(g.jsxs)("div",{className:"signIn",children:[Object(g.jsxs)("div",{className:"signIn__form",children:[Object(g.jsx)("div",{children:Object(g.jsx)("img",{src:_,alt:"logo"})}),Object(g.jsx)("div",{className:"signIn__title",children:"Login to your account"}),Object(g.jsx)("div",{className:"signIn__form__wrapper",children:Object(g.jsx)(ie,{wrongPassword:function(e){return Object(J.b)("".concat(e))}})})]}),Object(g.jsx)(J.a,{})]})}}]),ce=[{path:"/dashboard",exact:!0,component:Q},{path:"/settings",exact:!0,component:ae}],oe=n(93),de=function(e){return Object(g.jsx)(b.b,Object(oe.a)({},e))},le=function(e){return Object(g.jsx)(b.b,Object(oe.a)({},e))},ue=function(){var e=Object(a.useState)({}),t=Object(u.a)(e,2),n=t[0],s=t[1],i=Object(a.useState)([]),r=Object(u.a)(i,2),c=r[0],o=r[1],m=Object(a.useState)({}),p=Object(u.a)(m,2),v=p[0],h=p[1],O=Object(a.useState)({}),f=Object(u.a)(O,2),x=f[0],_=f[1],w=Object(a.useState)({}),N=Object(u.a)(w,2),C=N[0],k=N[1],S=Object(a.useState)({}),y=Object(u.a)(S,2),D=y[0],T=y[1],E=R();Object(a.useEffect)((function(){E&&te(s)}),[E]);var I=function(){var e=Object(l.a)(d.a.mark((function e(t,n,a,s){var i,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[],[t,n,a,s].forEach((function(e,t){0!==Object.keys(e).length&&null!==e&&i.push(e)})),e.next=5,H()({method:"PUT",url:"".concat(j,"/admin/editSensor"),headers:{Authorization:"Bearer ".concat(E),"Content-Type":"application/json"},data:{editArray:i}});case 5:(r=e.sent)&&r.editedSensors&&(h({}),_({}),k({}),T({}));case 7:case"end":return e.stop()}}),e)})));return function(t,n,a,s){return e.apply(this,arguments)}}();return Object(g.jsx)(A.Provider,{value:{token:E,profileInfo:n,sensorTimeslots:c,setSensorTimeslots:o,am7:v,setAm7:h,am11:x,setAm11:_,pm3:C,setPm3:k,pm7:D,setPm7:T,sendChangeData:I},children:Object(g.jsxs)(b.d,{children:[E?ce.map((function(e){return Object(g.jsx)(le,{path:e.path,exact:e.exact,component:e.component},e.path)})):re.map((function(e){return Object(g.jsx)(de,{path:e.path,exact:e.exact,component:e.component},e.path)})),Object(g.jsx)(b.b,{exact:!0,path:"*",children:Object(g.jsx)(b.a,{to:E?"/dashboard":"/signIn"})})]})})};var je=function(){return Object(g.jsx)(ue,{})};r.a.render(Object(g.jsx)(s.a.StrictMode,{children:Object(g.jsx)(c.a,{children:Object(g.jsx)(je,{})})}),document.getElementById("root"))}},[[497,1,2]]]);
//# sourceMappingURL=main.6741874d.chunk.js.map